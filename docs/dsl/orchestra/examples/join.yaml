version: 1.0

description: Calculates (a + b) * (c + d)

input:
  - a: 0
  - b: 0
  - c: 0
  - d: 0

output:
  result: <% $.abcd %>

tasks:
  task1:
    action: math.add
    input:
      operand1: <% $.a %>
      operand2: <% $.b %>
    on-complete:
      - if: <% state() = "succeeded" %>
        publish:
          ab: <% result() %>
        next:
          - task3
    task2:
      action: math.add operand1=<% $.c %> operand2=<% $.d %>
      on-complete:
        - if: <% state() = "succeeded" %>
          publish: cd=<% result() %>
          next: task3                
    task3:
      join: all
      action: math.multiple operand1=<% $.ab %> operand2=<% $.cd %>
      on-complete:
        - if: <% state() = "succeeded" %>
          publish: abcd=<% result() %>
